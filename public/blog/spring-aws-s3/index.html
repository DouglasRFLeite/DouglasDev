<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Tutorial - Spring Boot & AWS S3 for Image Storing | DouglasDev</title>
<meta name=keywords content="Java,Spring,Spring Boot,AWS,Cloud,S3"><meta name=description content="A Tutorial of how I created a Spring Boot Application to store and retrieve images from an AWS S3 Bucket"><meta name=author content="Douglas"><link rel=canonical href=https://canonical.url/to/page><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.eb010bce980c6450595d968d3d88ebc4a8b3750ec5bb5cbdef57d4f2f642da6f.css integrity="sha256-6wELzpgMZFBZXZaNPYjrxKizdQ7Fu1y971fU8vZC2m8=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/code-icon.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/blog/spring-aws-s3/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/blog/spring-aws-s3/"><meta property="og:site_name" content="DouglasDev"><meta property="og:title" content="Tutorial - Spring Boot & AWS S3 for Image Storing"><meta property="og:description" content="A Tutorial of how I created a Spring Boot Application to store and retrieve images from an AWS S3 Bucket"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-03-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-03-16T00:00:00+00:00"><meta property="article:tag" content="Java"><meta property="article:tag" content="Spring"><meta property="article:tag" content="Spring Boot"><meta property="article:tag" content="AWS"><meta property="article:tag" content="Cloud"><meta property="article:tag" content="S3"><meta property="og:image" content="http://localhost:1313/images/cool-setup-007.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/cool-setup-007.jpg"><meta name=twitter:title content="Tutorial - Spring Boot & AWS S3 for Image Storing"><meta name=twitter:description content="A Tutorial of how I created a Spring Boot Application to store and retrieve images from an AWS S3 Bucket"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blogs","item":"http://localhost:1313/blog/"},{"@type":"ListItem","position":2,"name":"Tutorial - Spring Boot \u0026 AWS S3 for Image Storing","item":"http://localhost:1313/blog/spring-aws-s3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tutorial - Spring Boot \u0026 AWS S3 for Image Storing","name":"Tutorial - Spring Boot \u0026 AWS S3 for Image Storing","description":"A Tutorial of how I created a Spring Boot Application to store and retrieve images from an AWS S3 Bucket","keywords":["Java","Spring","Spring Boot","AWS","Cloud","S3"],"articleBody":"So… my wife was busy on a Sunday afternoon. Do you know what that means? Yeah… It means I’m going to code my a*s off.\nI’ve been wanting to start playing with AWS for sometime now, and this week I thought of an interesting use for AWS S3 at work and wanted to test it out.\nThe idea is to store and retrieve images on S3 using a Spring Boot Application.\nWhat is AWS S3? I really don’t want to get into too much detail here, the purpose of this article is to showcase this project and give you a step-by-step tutorial of how to replicate it yourself.\nBut S3 is one of many AWS’s Cloud Storage services, this one made specially to store simple files, like an actual File System. In this tutorial, I’m storing files on the root, so I really won’t get into much more detail than that. But you can check some of the references if you want more information.\nDisclaimer! I’ve just mentioned I’m new to Cloud and AWS, so pardon me if I said anything stupid.\nWhat is Spring Boot? Again, I don’t want to get into too much detail, and I assume that if you’re here you’ve probably heard of Spring.\nBut, again, Spring Boot is a Java Framework (let’s not get into so many details folks) that quickens the initialization of complex Java Applications and their growth. Here, specifically, I only use Spring Core (obviously) and Spring Web for the API.\nPrerequisites If you want to follow me through every step of this project, you are probably going to need:\nJava 17+ (installed on you machine or environment) Visual Studio Code (to be referenced as VSCode) or any other IDE Internet Connection That’s about it. Spring is a Java dependecy so you need not to download it.\nStep 1 - Creating you AWS S3 Bucket 1.1 - Create your account First of all, you should access the AWS Console and create a free account.\nI’m not going into detail on this step, but it does take sometime so do it carefully. I created a free acount but if you’re Elon Musk’s son you may want to go ahead and create a paid one.\n1.2 - Create your S3 Bucket After successfully Login-in, you should be redirected to the actual AWS Console.\nIt should look like this if this is your first time on it:\nFirst of all, I would recommend you change the region in the upper right corner to be the closest one to you. I forgot doing it the first time and had simple requests take a coulpe of seconds to return.\nNow get to the search bar and type “S3” - or look for it in the menu if you have more time. Access the S3 page.\nYou can see I have a weirdly named and wrong region Bucket created there. The idea of you following this tutorial is that you don’t go through that as I did hehe\nCreate a Bucket.\nYou will need to provide an unique name, do that as you wish but it can’t be:\nimage-storage-and-retrieval-s3-test-douglas\nYou can leave absolutely everything else as default and click Create bucket at the bottom of the page.\nYou should be back at the S3 Console page. If you click on your bucket’s name you can look around on it’s specific console and play with it. You can even start storing stuff. But, for the purpose of this tutorial, you just need to remember it’s name.\n1.3 Create your Amazon User Now will access the Identity and Access Management (IAM) Dashboard. Type IAM on the search-bar and click the link. You should see something like this:\nOn the Menu on your left, chose “Users”. Then go for “Create User”, type a username (anyone) and go for “Next”.\nOn the “Set permissions” page, choose the option to your right: “Attach policies directly” like so:\nYou will see a bug list of permissions show up in the bottom of the page. Type “AmazonS3FullAccess” and check that.\nClick “Next”, review everything and click “Create User”. You will be back at the list of your users. Click on the one you’ve just created to see a details screen for that user.\nOnce there, you should find the option to “Create Access Key” and click it.\nAt this point, if you’re just doing all of this to follow this tutorial and learn as I did, you can just click on “Local Code” and you’re good to go. Otherwise, examine all of the options and chose what’s best for you.\nAfter a couple more “Next” clicks, you should see a screen like this:\nCopy this keys. Print the screen. Do something with them. I turned them into Environment Variables right away so I could use them in my code, but do as you wish.\nStep 2 - Creating your Spring Boot Application 2.1 Create a Project with Spring Initilzr I use the Spring Initilizr via the Spring Boot Extension Pack on VSCode. You can always do it via the web, create your project and unzip it to start coding. But what you’re going to do is\nCreate a Maven Project Spring Boot Version 3.4.3 Java Name it as you wish I’ve used Java 17 and Jar packing You’ll add dependencies: Spring Web, Spring Boot Dev Tools (Optional), Lombok (Optional) And you’re good to go. Or almost. Just go to your pom.xml file and add this dependency:\ncom.amazonaws aws-java-sdk-s3 1.12.182 Now you’re good to go. You can even run your code to check if everything works fine.\n2.2 Create your S3Config file The first file we’re going to create will be the S3Config.java. In this file we will create a Bean method. That way, when Spring begins, it will run that method once and store the result in a way that, every time I ask for an object of that class, it will give it to me.\n@Configuration public class S3Config { @Bean public AmazonS3 amazonS3() { BasicAWSCredentials awsCredentials = new BasicAWSCredentials( // System.getenv(\"AWS_ACCESS_KEY_ID\"), // System.getenv(\"AWS_SECRET_ACCESS_KEY\")); return AmazonS3ClientBuilder // .standard() // .withRegion(System.getenv(\"AWS_REGION\")) // .withCredentials(new AWSStaticCredentialsProvider(awsCredentials)) // .build(); } } As I’ve said, I turned the credentials into environment variables, but you can just paste them here if you want to.\n2.3 Create your S3Service file The S3Service.java file will be responsible for adapting images from one place to another. That is, it’ll take an image and store and will fetch an image from storage, when requested.\nHere you will have access to the amazonS3 object like it were a Repository. You will also hold the bucket information.\n@Service public class S3Service { @Autowired private AmazonS3 amazonS3; private final String bucketName = \"image-storage-and-retrieval-s3-test-douglas\"; public byte[] getImage(String fileName) throws IOException { S3Object s3Object = amazonS3.getObject(bucketName, fileName); try (S3ObjectInputStream objectInputStream = s3Object.getObjectContent()) { return IOUtils.toByteArray(objectInputStream); } } public String uploadImage(MultipartFile file) throws IOException { File tempFile = convertMultiPartFileToFile(file); amazonS3.putObject(bucketName, file.getOriginalFilename(), tempFile); tempFile.delete(); return \"Imagem carregada com sucesso: \" + file.getOriginalFilename(); } private File convertMultiPartFileToFile(MultipartFile file) throws IOException { File tempFile = new File(file.getOriginalFilename()); try (FileOutputStream fos = new FileOutputStream(tempFile)) { fos.write(file.getBytes()); } return tempFile; } } Here I decided to use a MultiPart communication, but you can probably do it differently. The purpose of this tutorial is to connect to S3, so I didn’t bother much with that.\n2.4 Create your S3Controller so you can access it from outside Writing this I remembered when I was in university and we created little terminal menus to access the software’s functions. Teachers would’ve done us so much good if they thaught us how to do it with APIs instead, but sure…\nLet’s go. Here you have 3 options:\nCreate the Get Method and upload your images via S3 Console; Create the Post Method and check if they’re available on the S3 Console; Create both Get and Post Methods. All 3 options will give you a Spring Boot Application that connects with a S3 Bucket, but I will do the third.\n@RestController @RequestMapping() public class S3Controller { @Autowired private S3Service s3Service; @GetMapping(\"/image/{fileName}\") public ResponseEntity getImage(@PathVariable String fileName) throws IOException { byte[] imageBytes = s3Service.getImage(fileName); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.IMAGE_JPEG); return ResponseEntity.ok() .headers(headers) .body(imageBytes); } @PostMapping(\"/upload\") public String uploadImage(@RequestParam(\"file\") MultipartFile file) { try { return s3Service.uploadImage(file); } catch (Exception e) { e.printStackTrace(); return \"Erro no upload da imagem!\"; } } } You can change the mapping if you want… I really don’t care much.\n“You’re code is wrong! What if the image is not JPEG?”\nYou can fetch the metadata from the bucket, but I only tested it with JPEG images so I didn’t care.\nYou’re code should be running smoothly by know.\n","wordCount":"1443","inLanguage":"en","image":"http://localhost:1313/images/cool-setup-007.jpg","datePublished":"2025-03-16T00:00:00Z","dateModified":"2025-03-16T00:00:00Z","author":{"@type":"Person","name":"Douglas"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/blog/spring-aws-s3/"},"publisher":{"@type":"Organization","name":"DouglasDev","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/code-icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Home (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/about/ title=About><span>About</span></a></li><li><a href=http://localhost:1313/blog/ title=Blog><span>Blog</span></a></li><li><a href=http://localhost:1313/projects/ title=Projects><span>Projects</span></a></li><li><a href=http://localhost:1313/contact/ title=Contact><span>Contact</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/blog/>Blogs</a></div><h1 class="post-title entry-hint-parent">Tutorial - Spring Boot & AWS S3 for Image Storing</h1><div class=post-description>A Tutorial of how I created a Spring Boot Application to store and retrieve images from an AWS S3 Bucket</div><div class=post-meta><span title='2025-03-16 00:00:00 +0000 UTC'>March 16, 2025</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1443 words&nbsp;·&nbsp;Douglas</div></header><figure class=entry-cover><img loading=eager src=http://localhost:1313/images/cool-setup-007.jpg alt="Cool Setup"><p>Unfortunetly not my setup</p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#what-is-aws-s3>What is AWS S3?</a></li><li><a href=#what-is-spring-boot>What is Spring Boot?</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#step-1---creating-you-aws-s3-bucket>Step 1 - Creating you AWS S3 Bucket</a><ul><li><a href=#11---create-your-account>1.1 - Create your account</a></li><li><a href=#12---create-your-s3-bucket>1.2 - Create your S3 Bucket</a></li><li><a href=#13-create-your-amazon-user>1.3 Create your Amazon User</a></li></ul></li><li><a href=#step-2---creating-your-spring-boot-application>Step 2 - Creating your Spring Boot Application</a><ul><li><a href=#21-create-a-project-with-spring-initilzr>2.1 Create a Project with Spring Initilzr</a></li><li><a href=#22-create-your-s3config-file>2.2 Create your S3Config file</a></li><li><a href=#23-create-your-s3service-file>2.3 Create your S3Service file</a></li><li><a href=#24-create-your-s3controller-so-you-can-access-it-from-outside>2.4 Create your S3Controller so you can access it from outside</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>So&mldr; my wife was busy on a Sunday afternoon. Do you know what that means? Yeah&mldr; It means I&rsquo;m going to code my a*s off.</p><p>I&rsquo;ve been wanting to start playing with AWS for sometime now, and this week I thought of an interesting use for AWS S3 at work and wanted to test it out.</p><p>The idea is to store and retrieve images on S3 using a Spring Boot Application.</p><h2 id=what-is-aws-s3>What is AWS S3?<a hidden class=anchor aria-hidden=true href=#what-is-aws-s3>#</a></h2><p>I really don&rsquo;t want to get into too much detail here, the purpose of this article is to showcase this project and give you a step-by-step tutorial of how to replicate it yourself.</p><p>But S3 is one of many AWS&rsquo;s Cloud Storage services, this one made specially to store simple files, like an actual File System. In this tutorial, I&rsquo;m storing files on the root, so I really won&rsquo;t get into much more detail than that. But you can check some of the references if you want more information.</p><p><strong>Disclaimer!</strong> I&rsquo;ve just mentioned I&rsquo;m new to Cloud and AWS, so pardon me if I said anything stupid.</p><h2 id=what-is-spring-boot>What is Spring Boot?<a hidden class=anchor aria-hidden=true href=#what-is-spring-boot>#</a></h2><p>Again, I don&rsquo;t want to get into too much detail, and I assume that if you&rsquo;re here you&rsquo;ve probably heard of Spring.</p><p>But, again, Spring Boot is a Java Framework (let&rsquo;s not get into so many details folks) that quickens the initialization of complex Java Applications and their growth. Here, specifically, I only use Spring Core (obviously) and Spring Web for the API.</p><h2 id=prerequisites>Prerequisites<a hidden class=anchor aria-hidden=true href=#prerequisites>#</a></h2><p>If you want to follow me through every step of this project, you are probably going to need:</p><ul><li>Java 17+ (installed on you machine or environment)</li><li>Visual Studio Code (to be referenced as VSCode) or any other IDE</li><li>Internet Connection</li></ul><p>That&rsquo;s about it. Spring is a Java dependecy so you need not to download it.</p><h2 id=step-1---creating-you-aws-s3-bucket>Step 1 - Creating you AWS S3 Bucket<a hidden class=anchor aria-hidden=true href=#step-1---creating-you-aws-s3-bucket>#</a></h2><h3 id=11---create-your-account>1.1 - Create your account<a hidden class=anchor aria-hidden=true href=#11---create-your-account>#</a></h3><p>First of all, you should access the <a href=https://aws.amazon.com/console/><strong>AWS Console</strong></a> and create a free account.</p><p>I&rsquo;m not going into detail on this step, but it does take sometime so do it carefully. I created a free acount but if you&rsquo;re Elon Musk&rsquo;s son you may want to go ahead and create a paid one.</p><h3 id=12---create-your-s3-bucket>1.2 - Create your S3 Bucket<a hidden class=anchor aria-hidden=true href=#12---create-your-s3-bucket>#</a></h3><p>After successfully Login-in, you should be redirected to the actual AWS Console.</p><p>It should look like this if this is your first time on it:</p><p><img alt="AWS Console" loading=lazy src=images/spring-aws-s3/aws-console.png></p><p>First of all, I would recommend you change the region in the upper right corner to be the closest one to you. I forgot doing it the first time and had simple requests take a coulpe of seconds to return.</p><p>Now get to the search bar and type &ldquo;S3&rdquo; - or look for it in the menu if you have more time. Access the S3 page.</p><p><img alt="AWS S3 Console" loading=lazy src=images/spring-aws-s3/s3-page.png></p><p>You can see I have a weirdly named and wrong region Bucket created there. The idea of you following this tutorial is that you don&rsquo;t go through that as I did hehe</p><p>Create a Bucket.</p><p>You will need to provide an unique name, do that as you wish but it can&rsquo;t be:</p><p><code>image-storage-and-retrieval-s3-test-douglas</code></p><p>You can leave absolutely everything else as default and click <strong>Create bucket</strong> at the bottom of the page.</p><p>You should be back at the S3 Console page. If you click on your bucket&rsquo;s name you can look around on it&rsquo;s specific console and play with it. You can even start storing stuff. But, for the purpose of this tutorial, you just need to remember it&rsquo;s name.</p><h3 id=13-create-your-amazon-user>1.3 Create your Amazon User<a hidden class=anchor aria-hidden=true href=#13-create-your-amazon-user>#</a></h3><p>Now will access the <strong>Identity and Access Management (IAM)</strong> Dashboard. Type IAM on the search-bar and click the link. You should see something like this:</p><p><img alt="IAM Console" loading=lazy src=images/spring-aws-s3/iam-dashboard.png></p><p>On the Menu on your left, chose &ldquo;Users&rdquo;. Then go for &ldquo;Create User&rdquo;, type a username (anyone) and go for &ldquo;Next&rdquo;.</p><p>On the &ldquo;Set permissions&rdquo; page, choose the option to your right: &ldquo;Attach policies directly&rdquo; like so:</p><p><img alt="User Permissions" loading=lazy src=images/spring-aws-s3/user-permissions.png></p><p>You will see a bug list of permissions show up in the bottom of the page. Type &ldquo;<strong>AmazonS3FullAccess</strong>&rdquo; and check that.</p><p><img alt=AmazonS3FullAccess loading=lazy src=images/spring-aws-s3/s3-full-access.png></p><p>Click &ldquo;Next&rdquo;, review everything and click &ldquo;Create User&rdquo;. You will be back at the list of your users. Click on the one you&rsquo;ve just created to see a details screen for that user.</p><p>Once there, you should find the option to &ldquo;Create Access Key&rdquo; and click it.</p><p><img alt="Create Access Key" loading=lazy src=images/spring-aws-s3/create-access-key.png></p><p>At this point, if you&rsquo;re just doing all of this to follow this tutorial and learn as I did, you can just click on &ldquo;Local Code&rdquo; and you&rsquo;re good to go. Otherwise, examine all of the options and chose what&rsquo;s best for you.</p><p>After a couple more &ldquo;Next&rdquo; clicks, you should see a screen like this:</p><p><img alt=Keys loading=lazy src=images/spring-aws-s3/keys.png></p><p>Copy this keys. Print the screen. Do something with them. I turned them into Environment Variables right away so I could use them in my code, but do as you wish.</p><h2 id=step-2---creating-your-spring-boot-application>Step 2 - Creating your Spring Boot Application<a hidden class=anchor aria-hidden=true href=#step-2---creating-your-spring-boot-application>#</a></h2><h3 id=21-create-a-project-with-spring-initilzr>2.1 Create a Project with Spring Initilzr<a hidden class=anchor aria-hidden=true href=#21-create-a-project-with-spring-initilzr>#</a></h3><p>I use the Spring Initilizr via the Spring Boot Extension Pack on VSCode. You can always do it via the web, create your project and unzip it to start coding. But what you&rsquo;re going to do is</p><ol><li>Create a Maven Project</li><li>Spring Boot Version 3.4.3</li><li>Java</li><li>Name it as you wish</li><li>I&rsquo;ve used Java 17 and Jar packing</li><li>You&rsquo;ll add dependencies: Spring Web, Spring Boot Dev Tools (Optional), Lombok (Optional)</li></ol><p>And you&rsquo;re good to go. Or almost. Just go to your <code>pom.xml</code> file and add this dependency:</p><pre tabindex=0><code>&lt;dependency&gt;
    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;
    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;
    &lt;version&gt;1.12.182&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>Now you&rsquo;re good to go. You can even run your code to check if everything works fine.</p><h3 id=22-create-your-s3config-file>2.2 Create your S3Config file<a hidden class=anchor aria-hidden=true href=#22-create-your-s3config-file>#</a></h3><p>The first file we&rsquo;re going to create will be the <code>S3Config.java</code>. In this file we will create a <code>Bean</code> method. That way, when Spring begins, it will run that method once and store the result in a way that, every time I ask for an object of that class, it will give it to me.</p><pre tabindex=0><code>@Configuration
public class S3Config {

    @Bean
    public AmazonS3 amazonS3() {
        BasicAWSCredentials awsCredentials = new BasicAWSCredentials( //
                System.getenv(&#34;AWS_ACCESS_KEY_ID&#34;), //
                System.getenv(&#34;AWS_SECRET_ACCESS_KEY&#34;));

        return AmazonS3ClientBuilder //
                .standard() //
                .withRegion(System.getenv(&#34;AWS_REGION&#34;)) //
                .withCredentials(new AWSStaticCredentialsProvider(awsCredentials)) //
                .build();
    }
}
</code></pre><p>As I&rsquo;ve said, I turned the credentials into environment variables, but you can just paste them here if you want to.</p><h3 id=23-create-your-s3service-file>2.3 Create your S3Service file<a hidden class=anchor aria-hidden=true href=#23-create-your-s3service-file>#</a></h3><p>The <code>S3Service.java</code> file will be responsible for adapting images from one place to another. That is, it&rsquo;ll take an image and store and will fetch an image from storage, when requested.</p><p>Here you will have access to the amazonS3 object like it were a Repository. You will also hold the bucket information.</p><pre tabindex=0><code>@Service
public class S3Service {

    @Autowired
    private AmazonS3 amazonS3;
    private final String bucketName = &#34;image-storage-and-retrieval-s3-test-douglas&#34;;

    public byte[] getImage(String fileName) throws IOException {
        S3Object s3Object = amazonS3.getObject(bucketName, fileName);
        try (S3ObjectInputStream objectInputStream = s3Object.getObjectContent()) {
            return IOUtils.toByteArray(objectInputStream);
        }
    }

    public String uploadImage(MultipartFile file) throws IOException {
        File tempFile = convertMultiPartFileToFile(file);
        amazonS3.putObject(bucketName, file.getOriginalFilename(), tempFile);
        tempFile.delete();
        return &#34;Imagem carregada com sucesso: &#34; + file.getOriginalFilename();
    }

    private File convertMultiPartFileToFile(MultipartFile file) throws IOException {
        File tempFile = new File(file.getOriginalFilename());
        try (FileOutputStream fos = new FileOutputStream(tempFile)) {
            fos.write(file.getBytes());
        }
        return tempFile;
    }
}
</code></pre><p>Here I decided to use a MultiPart communication, but you can probably do it differently. The purpose of this tutorial is to connect to S3, so I didn&rsquo;t bother much with that.</p><h3 id=24-create-your-s3controller-so-you-can-access-it-from-outside>2.4 Create your S3Controller so you can access it from outside<a hidden class=anchor aria-hidden=true href=#24-create-your-s3controller-so-you-can-access-it-from-outside>#</a></h3><p>Writing this I remembered when I was in university and we created little terminal menus to access the software&rsquo;s functions. Teachers would&rsquo;ve done us so much good if they thaught us how to do it with APIs instead, but sure&mldr;</p><p>Let&rsquo;s go. Here you have 3 options:</p><ol><li>Create the Get Method and upload your images via S3 Console;</li><li>Create the Post Method and check if they&rsquo;re available on the S3 Console;</li><li>Create both Get and Post Methods.</li></ol><p>All 3 options will give you a Spring Boot Application that connects with a S3 Bucket, but I will do the third.</p><pre tabindex=0><code>@RestController
@RequestMapping()
public class S3Controller {
    @Autowired
    private S3Service s3Service;

    @GetMapping(&#34;/image/{fileName}&#34;)
    public ResponseEntity&lt;byte[]&gt; getImage(@PathVariable String fileName) throws IOException {
        byte[] imageBytes = s3Service.getImage(fileName);
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.IMAGE_JPEG);

        return ResponseEntity.ok()
                .headers(headers)
                .body(imageBytes);
    }

    @PostMapping(&#34;/upload&#34;)
    public String uploadImage(@RequestParam(&#34;file&#34;) MultipartFile file) {
        try {
            return s3Service.uploadImage(file);
        } catch (Exception e) {
            e.printStackTrace();
            return &#34;Erro no upload da imagem!&#34;;
        }
    }
}
</code></pre><p>You can change the mapping if you want&mldr; I really don&rsquo;t care much.</p><p>&ldquo;<em>You&rsquo;re code is wrong! What if the image is not JPEG?</em>&rdquo;</p><p>You can fetch the metadata from the bucket, but I only tested it with JPEG images so I didn&rsquo;t care.</p><p>You&rsquo;re code should be running smoothly by know.</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/java/>Java</a></li><li><a href=http://localhost:1313/tags/spring/>Spring</a></li><li><a href=http://localhost:1313/tags/spring-boot/>Spring Boot</a></li><li><a href=http://localhost:1313/tags/aws/>AWS</a></li><li><a href=http://localhost:1313/tags/cloud/>Cloud</a></li><li><a href=http://localhost:1313/tags/s3/>S3</a></li></ul><nav class=paginav><a class=next href=http://localhost:1313/blog/3-leadership-lessons/><span class=title>Next »</span><br><span>Lessons I Learned About Leadership (That No One Told Me)</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>DouglasDev</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>